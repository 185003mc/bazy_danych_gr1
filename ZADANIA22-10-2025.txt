ZAD 1

CREATE table pracownik (
id_pracownika integer auto_increment PRIMARY KEY, 
imie VARCHAR(45) NOT NULL, 
nazwisko VARCHAR(45) NOT NULL,
data_ur DATE not NULL
);

INSERT INTO pracownik (imie, nazwisko, data_ur) VALUES
('Jan', 'Kowalski', '1990-01-01'),
('Anna','Nowak', '1980-01-01'),
('Piotr', 'Abacki', '1978-01-01');

UPDATE pracownik SET data_ur = '2000-06-15' WHERE id_pracownika = 1;


zad2
CREATE table ZADANIE ( 
id_zadania AUTO_increment PRIMARY KEY, 
nazwa VARCHAR(150) NOT NULL,
priorytet ENUM ('normalny', 'wysoki', 'niski') NOT NULL DEAFULT 'normalny',
opis TEXT,
pracownik INTEGER FOREIGN KEY (pracownik) REFERENCES pracownik(id) ON DELETE SET NULL);

INSERT INTO zadanie (nazwa, opis, pracownik) VALUES
('Sprawdzanie raportow', 'sprwadz szczegolowo raporty', 1),
('Przygotowanie prezentacji', 'opracuje prezentacje', 2),
('kontakt z klientem', 'umow sie na spotkanie', 3);


zad 3
CREATE TABLE projekt(
id_projektu INT auto_increment primary key,
nazwa_proj VARCHAR(150),
data_roz DATE,
data_zak DATE);

ALTER TABLE projekt ADD menadzer_proj INT; 
AlTER TABLE projekt ADD FOREIGN KEY (menadzer_proj) REFERENCES pracownik(id_pracownika);
INSERT INTO projekt (nazwa, data_roz, data_zak, menadzer_proj) VALUES 
('Proj1', '2025-01-02', NULL, 1),
('Proj2', '2025-02-02', '2025-06-30', 2);

ALTER TABLE zadanie ADD projekt INT;
ALTER TABLE zadanie ADD FOREIGN KEY (projekt) REFERENCES projekt(id_projektu) ON DELETE CASCADE;

UPDATE zadanie SET projekt = 1 WHERE id_zadania=1;
UPDATE zadanie SET projekt = 2 WHERE id_zadania=2;


ZAD4 

CREATE TABLE sprint (
id_sprintu INT AUTO_INCREMENT PRIMARY_KEY, 
nr_sprintu INT,
data_roz DATE,
data_zak DATE);


ALTER TABLE zadanie ADD sprint INT;
ALTER TABLE zadanie ADD FOREIGN KEY(sprint) REFERENCES sprint(id_sprintu) ON DELETE SET NULL;

INSERT INTO sprint (nr_sprintu, data_roz, data_zak) VALUES
(1, '2025-03-01', '2025-03-15');

UPDATE zadanie SET sprint = 1 WHERE id_zadania IN (1, 2);


Zad5

CREATE TABLE status (
id_statusu INTEGER AUTO_INCREMENT PRIMARY KEY, 
nazwa_statusu VARCHAR (20)
);

INSERT INTO status (nazwa_statusu) VALUES ('nowy'),('w toku'),('zamkniety');

CREATE TABLE zadanie_has_status ( 
id_zdarzenia INTEGER AUTO_INCREMENT PRIMARY KEY,
id_zadania INTEGER,
id_statusu INTEGER,
data_zdar TIMESTAMP
DEFAULT CURRENT_TIMESTAMP, 
FOREIGN KEY (id_zadania) REFERENCES zadanie(id_zadania),
FOREIGN KEY(id_statusu) REFERENCES status(id_statusu);

INSERT INTO zadanie_has_status (id_zadania, id_statusu) VALUES (1, 1), (2, 2,), (3, 3);

DELETE FROM projekt WHERE id_projektu = 1;
DROP TABLE sprint; 
